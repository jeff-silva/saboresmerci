(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{753:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAbBAMAAADv6ZCpAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACRQTFRFAAAA////////////////////////////////////////////tAmN6QAAAAx0Uk5TAP+2HtNBZ4uv2pP4x3VCgAAAAKFJREFUeJyFkMsNwkAMRG2UCImTRyh8jnRAK9sBdEALdEAplMh4P95kL8wl3peMZ7IiVSqDbiPAf3DfnifYFug8AhlAkmOd5rLMIuYJ6kygySdiRdeibvRA/smOj332KUpPArxKAnImJMrh8shf9ip5XJc/cUdaOlCbwNX9BlKJSgGuPCu7WjgO/t4C0O2x+LYlVgPxro5WoF1jWFdT00fkB5/UDAo80kg/AAAAAElFTkSuQmCC"},754:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAcBAMAAACE1hKaAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACRQTFRFAAAA////////////////////////////////////////////tAmN6QAAAAx0Uk5TAP9ntpMe+NqLQa/TPMBwmgAAALxJREFUeJxlUcENwjAMvCAhQHxiISCFFyN0hG7QbsAKbNBuABswKj67bioRKdGdc/bZCeBLRHKFSIKNOE0ndHkgcEHqKSG6GH/pns6WiDhd2rle9y7Xe7sTNyLcSj8nqfEbe9rrVcOYaoes8SS5NXExZSvfKAGrXGaf4FJ9bouzc09TnEaLUfaQQvvCOLvQ+e/IBqwt6zXmxyEGiAcKPmEZePUK/5zmK26Dylj5IJx4qQ98GvuVK9br+OT5A7gjDytOCcVPAAAAAElFTkSuQmCC"},755:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAmBAMAAACxJE+eAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAB5QTFRFAAAA////////////////////////////////////JHyblQAAAAp0Uk5TAP9ni0HTHq+TMH7WDE0AAACoSURBVHicnZJBDsIwDARtkEC9eaVyh5/wlJ76j/68dhxBbBepwoeomewmm7hEVoxWlOsFyDh3BQfGvhKZza5pPxSrM7wjUw3nKMqQrGauibnKVPiourl6ITleC3KQpTAs5W7tDpfIPFw09zfNJ1gtQfejR38UWlvtqSDeeyHfuzLJrE96Q/pwr2z0DozO6A7P0DZCgE2H74K5bYs1MU0735D+mun5+dwBYh0PVJL5GFsAAAAASUVORK5CYII="},899:function(t,e,n){"use strict";n.r(e);n(35),n(8),n(84),n(85),n(34),n(41);var d=n(0),o={props:{value:{default:function(){return{}}}},watch:{$props:{deep:!0,handler:function(t){this.props=Object.assign({},t)}},$route:{deep:!0,handler:function(t){var e=this.getNode({id:t.query.node});0==this.getNodes({parent:e.id}).length&&this.nodeAddChildren(e)}},props:{deep:!0,handler:function(t){for(var i in t)this.$emit(i,t[i])}}},computed:{compSlotBind:function(){var t,e,n={},d=this.$route.query.node||!1;return!d&&null!==(t=this.props)&&void 0!==t&&null!==(e=t.value)&&void 0!==e&&e.nodes&&(d=this.props.value.nodes[0].id),n.tabId=this.$route.query.tab,n.nodeId=d,n.node={},n.nodeParent={},n.nodeChildren=[],n.nodeId&&(n.node=this.getNode({id:n.nodeId}),n.nodeParent=n.node.parent?this.getNode({id:n.node.parent}):{},n.nodeChildren=this.getNodes({parent:n.nodeId})),n.times=this.getNodes({parent:n.nodeId,type:"time"}).sort((function(a,b){return a.order>b.order?1:b.order>a.order?-1:0})),n.spaces=this.getNodes({parent:n.nodeId,type:"space"}).sort((function(a,b){return a.order>b.order?1:b.order>a.order?-1:0})),n.users=this.getNodes({parent:n.nodeId,type:"user"}).sort((function(a,b){return a.order>b.order?1:b.order>a.order?-1:0})),n.targets=this.getNodes({parent:n.nodeId,type:"target"}).sort((function(a,b){return a.order>b.order?1:b.order>a.order?-1:0})),n.nodeRoot=this.getNode({parent:""}),n.rut=this.getRut(),n.tevep=this.props.value,n.tabs=this.tabs,n.tab={},n.tabId&&this.tabs.forEach((function(t){t.id==n.tabId&&(n.tab=t)})),n.error=this.error,n.nodeAdd=this.nodeAdd,n.nodeGoto=this.nodeGoto,n.nodeRemove=this.nodeRemove,n.nodeChangeDate=this.nodeChangeDate,n.tevepSave=this.tevepSave,n.getNode=this.getNode,n.getNodes=this.getNodes,n.emit=this.emit,n}},methods:{uuid:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"node-",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xxxxxxxxxx";return t+e.replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},emit:function(){this.$emit("input",this.props.value)},tevepDefault:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({id:"",user_id:"",title:"",divisor:"days",nodes:[],date_start:"",date_final:""},t||{})},tevepSave:function(){var t=this;this.error={},this.props.value.user_id=this.$auth.user.id,this.$axios.post("/api/tevep/store",this.props.value).then((function(e){e.data.error&&(t.error=e.data.error),t.tevepInit(e.data),t.$swalSuccess("Projeto salvo")}))},nodeDefault:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:this.uuid(),title:"",parent:"",level:0,type:"",order:0,show:0,date_start:"",date_final:"",utilities:[],inherences:[],expectations:[],innovations:[],logistics:[],relevance:[],complexity:[],costs:[],delivery:[],safety:[],attendance:[],quality:[],machine:[],material:[],labor:[],environment:[],methods:[]},t||{})},nodeAdd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.props.value&&this.props.value.nodes&&(t=this.nodeDefault(t),this.props.value.nodes.push(t),e&&this.nodeAddChildren(t)),this.$emit("input",this.props.value),t},nodeAddChildren:function(t){for(var e=0==t.level?1:7,n=1+(t.level||0),i=0;i<e;i++)this.nodeAdd({id:this.uuid(),parent:t.id,level:n,title:"T".concat(i+1),date_start:"",type:"time",order:i},!1),this.nodeAdd({id:this.uuid(),parent:t.id,level:n,title:"E".concat(i+1),date_start:"",type:"space",order:i},!1),this.nodeAdd({id:this.uuid(),parent:t.id,level:n,title:"",date_start:"",type:"user",order:i},!1),this.nodeAdd({id:this.uuid(),parent:t.id,level:n,title:"",date_start:"",type:"target",order:i},!1)},nodeChangeDate:function(t){var e=this.getNode({id:t.parent}),n=this.getNodes({parent:t.parent,type:t.type});n.forEach((function(d,o){var r=n[o-1]||!1,l=n[o+1]||!1;0==o&&e&&e.date_start&&(d.date_start=e.date_start),6==o&&e&&e.date_final&&(d.date_final=e.date_final),d.id==t.id&&(d.date_start&&r&&(r.date_final=d.date_start),d.date_final&&l&&(l.date_start=d.date_final))}))},nodeRemove:function(t){var e=this;this.$swalConfirm("Deseja deletar este item?",(function(){var n=e.props.value.nodes.indexOf(t);e.props.value.nodes.splice(n,1),e.emit()}))},nodeGoto:function(t){var e=this;this.$router.push({query:{node:t,tab:this.$route.query.tab}}),this.props.value.nodes.forEach((function(n){if(n.id==t){var d=e.getNode({id:n.parent});n.level=d.level+1}}))},getNodes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props.value.nodes||[];return["id","parent","type"].forEach((function(n){t[n]&&(e=e.filter((function(e){return e[n]==t[n]})))})),e},getNode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getNodes(t);return e[0]?e[0]:{}},getRut:function(){this.props.value.divisor;var t=this.getNode({id:this.$route.query.node}),e={date_start:0,date_final:0,diff:0},n=this.getNodes({type:"time",parent:t.id}).filter((function(t){return!!t.date_start&&!!t.date_final})),o=[];n=n.map((function(t){return(t={date_start:parseInt(d(t.date_start).format("x"))||0,date_final:parseInt(d(t.date_final).format("x"))||0,date_duration:0,percent:{start:0,duration:0},style:{},node:t}).date_duration=t.date_final-t.date_start,t.date_start>0&&o.push(t.date_start),t.date_final>0&&o.push(t.date_final),t})),e.date_start=Math.min.apply(null,o),e.date_final=Math.max.apply(null,o);var r=function(t,e,n){var d=100*(e-t)/(n-t);return Math.round(Math.max(d,-1*d))};return n=n.map((function(t){var n=r(e.date_start,t.date_start,e.date_final),d=r(e.date_start,t.date_final,e.date_final);t.percent.start=n,t.percent.duration=d;var o="#969fb6";return t.style="min-height:10px!important; background-color:".concat(o,"33; background-image:linear-gradient(to right, transparent ").concat(n,"%, ").concat(o," ").concat(n,"%, ").concat(o," ").concat(d,"%, transparent ").concat(d,"%);"),t})),e.items=n,e.date_start=d(e.date_start).format(),e.date_final=d(e.date_final).format(),e},tevepPopulate:function(){},tevepInit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this.tevepDefault(e),this.$set(this.props,"value",e),0==this.props.value.nodes.length&&this.nodeAdd({},!0),this.props.value.nodes=this.props.value.nodes.map((function(e){return t.nodeDefault(e)})),this.$emit("input",this.props.value),this.$emit("init",this.compSlotBind),this.$router.push({path:"/tevep/".concat(e.id||0,"/"),query:{node:this.$route.query.node||this.props.value.nodes[0].id,tab:this.$route.query.tab||this.tabs[0].id}})}},data:function(){return{props:Object.assign({},this.$props),error:{},loading:!1,tabs:[{id:"principios",title:"Princípios"},{id:"utilidade",title:"Utilidade"},{id:"inerencias",title:"Inerências"},{id:"expectativas",title:"Expectativas"},{id:"inovacoes",title:"Inovações"},{id:"logistica",title:"Logística"},{id:"relevancia",title:"Relevância"},{id:"complexidade",title:"Complexidade"},{id:"custo",title:"Custo"},{id:"entrega",title:"Entrega"},{id:"seguranca",title:"Segurança"},{id:"atendimento",title:"Atendimento"},{id:"qualidade",title:"Qualidade"},{id:"material",title:"Material"},{id:"maquina",title:"Máquina"},{id:"mao-de-obra",title:"Mão de obra"},{id:"meio-ambiente",title:"Meio ambiente"},{id:"metodo",title:"Método"},{id:"rut",title:"RUT"}],navs:[{title:"Princípios",tab:"principios",icon:!1,children:[]},{title:"Fundamentos",tab:"utilidade",icon:!1,children:[{title:"Utilidade",tab:"utilidade",icon:!1,children:[]},{title:"Inerências",tab:"inerencias",icon:!1,children:[]},{title:"Expectativas",tab:"expectativas",icon:!1,children:[]},{title:"Inovações",tab:"inovacoes",icon:!1,children:[]},{title:"Logística",tab:"logistica",icon:!1,children:[]},{title:"Relevância",tab:"relevancia",icon:!1,children:[]},{title:"Complexidade",tab:"complexidade",icon:!1,children:[]}]},{title:"CESAQ",tab:"custo",icon:n(753),children:[{title:"Custo",tab:"custo",icon:!1,children:[]},{title:"Entrega",tab:"entrega",icon:!1,children:[]},{title:"Segurança",tab:"seguranca",icon:!1,children:[]},{title:"Atendimento",tab:"atendimento",icon:!1,children:[]},{title:"Qualidade",tab:"qualidade",icon:!1,children:[]}]},{title:"5S",tab:"material",icon:n(754),children:[{title:"Material",tab:"material",icon:!1,children:[]},{title:"Máquina",tab:"maquina",icon:!1,children:[]},{title:"Mão de obra",tab:"mao-de-obra",icon:!1,children:[]},{title:"Meio ambiente",tab:"meio-ambiente",icon:!1,children:[]},{title:"Método",tab:"metodo",icon:!1,children:[]}]},{title:"RUT",tab:"rut",icon:n(755),children:[]}]}},mounted:function(){var t=this;this.$route.params.id?(this.loading=!0,this.$axios.get("/api/tevep/find/".concat(this.$route.params.id)).then((function(e){t.loading=!1;var n=e.data.id?e.data:{};t.tevepInit(n)}))):this.tevepInit()}},r=n(13),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tevep"},[t.loading?n("div",{staticClass:"p-3"},[t._m(0)]):n("form",{on:{submit:function(e){return e.preventDefault(),t.tevepSave()}}},t._l(t.tabs,(function(e){return e.id==t.$route.query.tab?n("div",[n("div",{staticStyle:{"max-width":"100%",overflow:"auto"}},[n("div",{staticStyle:{"min-width":"1300px"}},[n("div",{staticClass:"d-flex"},[n("div",{staticClass:"bg-dark"},[n("ul",{staticClass:"tevep-nav"},t._l(t.navs,(function(e){return n("li",{class:{active:t.compSlotBind.tabId==e.tab}},[n("nuxt-link",{attrs:{to:{query:{node:t.compSlotBind.nodeId,tab:e.tab}}}},[e.icon?n("img",{staticStyle:{width:"100%"},attrs:{src:e.icon,alt:e.title}}):n("span",[t._v(t._s(e.title))])]),t._v(" "),e.children.length>0?n("ul",{staticClass:"bg-dark"},t._l(e.children,(function(e){return n("li",{class:{active:t.compSlotBind.tabId==e.tab}},[n("nuxt-link",{attrs:{to:{query:{node:t.compSlotBind.nodeId,tab:e.tab}}}},[t._v(t._s(e.title))])],1)})),0):t._e()],1)})),0)]),t._v(" "),n("div",{staticClass:"flex-grow-1"},[n("div",{staticClass:"bg-dark py-1"},[t._t("header",null,null,t.compSlotBind)],2),t._v(" "),n("div",{staticClass:"d-flex py-2 shadow-sm font-weight-bold text-uppercase mb-2"},[n("div",{staticClass:"px-2"},[t._v(t._s(t.compSlotBind.tab.title))]),t._v(" "),n("div",{staticClass:"px-2"},[t._v("|")]),t._v(" "),n("div",{staticClass:"px-2"},[t.compSlotBind.nodeParent.id?n("span",[t._v(t._s(t.compSlotBind.nodeParent.title))]):t._e(),t._v(" "),t.compSlotBind.nodeParent.id?n("span",[t._v(" > ")]):t._e(),t._v(" "),n("span",[t._v(t._s(t.compSlotBind.node.title))])])]),t._v(" "),n("div",{staticClass:"p-2"},[t._t(e.id,[n("div",{staticClass:"bg-gray text-muted text-center p-3 m-0"},[t._v(t._s(e.title)+" em construção")])],null,t.compSlotBind)],2)])])])]),t._v(" "),n("div",{staticClass:"bg-dark p-2"},[t._t("footer",null,null,t.compSlotBind)],2)]):t._e()})),0)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-3 bg-white shadow-sm"},[n("i",{staticClass:"fas fa-circle-notch fa-spin"}),t._v("   Carregando...\r\n        ")])}],!1,null,null,null);e.default=component.exports}}]);